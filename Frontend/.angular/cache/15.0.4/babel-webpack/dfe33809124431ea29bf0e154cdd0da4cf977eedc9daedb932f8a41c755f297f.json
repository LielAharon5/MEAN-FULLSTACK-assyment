{"ast":null,"code":"import _asyncToGenerator from \"C:/react/00FULLSTACK MEAN assyment/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/data.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ListComponent_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const t_r2 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", t_r2._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(t_r2.name);\n  }\n}\nfunction ListComponent_table_5_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_5_tr_14_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const m_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deleteMe(m_r4._id));\n    });\n    i0.ɵɵtext(12, \"\\u274C\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const m_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r4.theater.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 4, m_r4.dateTime, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", m_r4.duration, \" min\");\n  }\n}\nfunction ListComponent_table_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Theater Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Movie Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Date & Time\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Duration\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Delete\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, ListComponent_table_5_tr_14_Template, 13, 7, \"tr\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.movies);\n  }\n}\nexport class ListComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.theaters = [];\n    this.movies = [];\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.theaters = yield _this.dataService.getAllTheaters();\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n  displayMovies(args) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const selectElement = args.target;\n        const theaterId = selectElement.value;\n        _this2.movies = yield _this2.dataService.getMoviesByTheater(theaterId);\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n  deleteMe(_id) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (!window.confirm(\"Are you sure?\")) return;\n        yield _this3.dataService.deleteMovie(_id);\n        alert(\"Movie has been deleted\");\n        // Refresh list:\n        const index = _this3.movies.findIndex(m => m._id === _id);\n        _this3.movies.splice(index, 1);\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n};\nListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListComponent,\n  selectors: [[\"app-list\"]],\n  decls: 6,\n  vars: 2,\n  consts: [[3, \"change\"], [\"selected\", \"\", \"disabled\", \"\", \"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"value\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"select\", 0);\n      i0.ɵɵlistener(\"change\", function ListComponent_Template_select_change_1_listener($event) {\n        return ctx.displayMovies($event);\n      });\n      i0.ɵɵelementStart(2, \"option\", 1);\n      i0.ɵɵtext(3, \"Select Theater\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, ListComponent_option_4_Template, 2, 2, \"option\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, ListComponent_table_5_Template, 15, 1, \"table\", 3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.theaters);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.movies == null ? null : ctx.movies.length);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i2.DatePipe],\n  styles: [\"table[_ngcontent-%COMP%] {\\r\\n    margin: 20px auto;\\r\\n}\\r\\n\\r\\ntable[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n    border: 2px solid;\\r\\n    border-collapse: collapse;\\r\\n    padding: 5px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kYXRhLWFyZWEvbGlzdC9saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxpQkFBaUI7QUFDckI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIseUJBQXlCO0lBQ3pCLFlBQVk7QUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyJ0YWJsZSB7XHJcbiAgICBtYXJnaW46IDIwcHggYXV0bztcclxufVxyXG5cclxudGFibGUsIHRoLCB0ZCB7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZDtcclxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;IAIQA,iCAAmD;IAAAA,YAAU;IAAAA,iBAAS;;;;IAAnCA,2CAAe;IAACA,eAAU;IAAVA,+BAAU;;;;;;IAczDA,0BAA6B;IACrBA,YAAkB;IAAAA,iBAAK;IAC3BA,0BAAI;IAAAA,YAAU;IAAAA,iBAAK;IACnBA,0BAAI;IAAAA,YAAwC;;IAAAA,iBAAK;IACjDA,0BAAI;IAAAA,YAAkB;IAAAA,iBAAK;IAC3BA,2BAAI;IACQA;MAAA;MAAA;MAAA;MAAA,OAASA,wCAAe;IAAA,EAAC;IAACA,uBAAC;IAAAA,iBAAS;;;;IAL5CA,eAAkB;IAAlBA,uCAAkB;IAClBA,eAAU;IAAVA,+BAAU;IACVA,eAAwC;IAAxCA,6EAAwC;IACxCA,eAAkB;IAAlBA,gDAAkB;;;;;IAflCA,6BAA8B;IAGdA,4BAAY;IAAAA,iBAAK;IACrBA,0BAAI;IAAAA,0BAAU;IAAAA,iBAAK;IACnBA,0BAAI;IAAAA,2BAAW;IAAAA,iBAAK;IACpBA,0BAAI;IAAAA,yBAAQ;IAAAA,iBAAK;IACjBA,2BAAI;IAAAA,uBAAM;IAAAA,iBAAK;IAGvBA,8BAAO;IACHA,uEAQK;IACTA,iBAAQ;;;;IATcA,gBAAS;IAATA,uCAAS;;;ACRvC,OAAM,MAAOC,aAAa;EAKtBC,YAA2BC,WAAwB;IAAxB,gBAAW,GAAXA,WAAW;IAH/B,aAAQ,GAAmB,EAAE;IAC7B,WAAM,GAAiB,EAAE;EAEuB;EAE1CC,QAAQ;IAAA;IAAA;MACjB,IAAI;QACA,KAAI,CAACC,QAAQ,SAAS,KAAI,CAACF,WAAW,CAACG,cAAc,EAAE;OAC1D,CACD,OAAOC,GAAQ,EAAE;QACbC,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC;;IACrB;EACL;EAEaC,aAAa,CAACC,IAAW;IAAA;IAAA;MAClC,IAAI;QACA,MAAMC,aAAa,GAAGD,IAAI,CAACE,MAA2B;QACtD,MAAMC,SAAS,GAAGF,aAAa,CAACG,KAAK;QACrC,MAAI,CAACC,MAAM,SAAS,MAAI,CAACb,WAAW,CAACc,kBAAkB,CAACH,SAAS,CAAC;OACrE,CACD,OAAOP,GAAQ,EAAE;QACbC,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC;;IACrB;EACL;EAEaS,QAAQ,CAACC,GAAW;IAAA;IAAA;MAC7B,IAAI;QAEA,IAAG,CAACC,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,EAAE;QAErC,MAAM,MAAI,CAAClB,WAAW,CAACmB,WAAW,CAACH,GAAG,CAAC;QACvCX,KAAK,CAAC,wBAAwB,CAAC;QAE/B;QACA,MAAMe,KAAK,GAAG,MAAI,CAACP,MAAM,CAACQ,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACN,GAAG,KAAKA,GAAG,CAAC;QACvD,MAAI,CAACH,MAAM,CAACU,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;OAE/B,CACD,OAAOhB,GAAQ,EAAE;QACbC,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC;;IACrB;EACL;;AA3CSR,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDV1B/B,2BAAK;MAEOA;QAAA,OAAUgC,yBAAqB;MAAA,EAAC;MACpChC,iCAAmC;MAAAA,8BAAc;MAAAA,iBAAS;MAC1DA,oEAAsE;MAC1EA,iBAAS;MAETA,mEAqBQ;MAEZA,iBAAM;;;MA1BwBA,eAAW;MAAXA,sCAAW;MAG7BA,eAAoB;MAApBA,oEAAoB","names":["i0","ListComponent","constructor","dataService","ngOnInit","theaters","getAllTheaters","err","alert","message","displayMovies","args","selectElement","target","theaterId","value","movies","getMoviesByTheater","deleteMe","_id","window","confirm","deleteMovie","index","findIndex","m","splice","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\react\\00FULLSTACK MEAN assyment\\Frontend\\src\\app\\components\\data-area\\list\\list.component.html","C:\\react\\00FULLSTACK MEAN assyment\\Frontend\\src\\app\\components\\data-area\\list\\list.component.ts"],"sourcesContent":["<div>\n\n    <select (change)=\"displayMovies($event)\">\n        <option selected disabled value=\"\">Select Theater</option>\n        <option *ngFor=\"let t of theaters\" value={{t._id}}>{{t.name}}</option>\n    </select>\n\n    <table *ngIf=\"movies?.length\">\n        <thead>\n            <tr>\n                <th>Theater Name</th>\n                <th>Movie Name</th>\n                <th>Date & Time</th>\n                <th>Duration</th>\n                <th>Delete</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let m of movies\">\n                <td>{{m.theater.name}}</td>\n                <td>{{m.name}}</td>\n                <td>{{m.dateTime | date:\"dd/MM/yyyy HH:mm\"}}</td>\n                <td>{{m.duration}} min</td>\n                <td>\n                    <button (click)=\"deleteMe(m._id)\">❌</button>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { MovieModel } from 'src/app/models/movie-model';\nimport { TheaterModel } from 'src/app/models/theater-model';\nimport { DataService } from 'src/app/services/data.service';\n\n@Component({\n    selector: 'app-list',\n    templateUrl: './list.component.html',\n    styleUrls: ['./list.component.css']\n})\nexport class ListComponent implements OnInit {\n\n    public theaters: TheaterModel[] = [];\n    public movies: MovieModel[] = [];\n\n    public constructor(private dataService: DataService) { }\n\n    public async ngOnInit() {\n        try {\n            this.theaters = await this.dataService.getAllTheaters();\n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n    public async displayMovies(args: Event) {\n        try {\n            const selectElement = args.target as HTMLSelectElement;\n            const theaterId = selectElement.value;\n            this.movies = await this.dataService.getMoviesByTheater(theaterId);\n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n    public async deleteMe(_id: string) {\n        try {\n            \n            if(!window.confirm(\"Are you sure?\")) return;\n\n            await this.dataService.deleteMovie(_id);\n            alert(\"Movie has been deleted\");\n            \n            // Refresh list:\n            const index = this.movies.findIndex(m => m._id === _id);\n            this.movies.splice(index, 1);\n            \n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}